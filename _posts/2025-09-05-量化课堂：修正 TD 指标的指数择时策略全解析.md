---
layout:     post
title:      量化课堂：修正 TD 指标的指数择时策略全解析
date:       2025-09-05
header-img: img/post-bg-desk.jpg
catalog: true
---

> 关键词：TD指标、择时策略、量化交易、市场回测、参数优化、止损设计、TD序列、TD组合

---

## 前言：为什么要用“修正”后的 TD 指标？

TD 指标由美国大型投资基金 Tudor 执行副总裁 Thomas R. DeMark 在 80 年代中期提出，核心目标是 **预测行情即将反转的临界区域**。因其逻辑简洁且命中率高，被全球投资者广泛使用。  
然而长期实盘表明，原版 TD 指标与 A 股节奏并不完全合拍：  
1. A 股情绪化明显，趋势延续更久；  
2. 停牌与涨跌停制度改变价格连续性；  
3. 政策驱动带来的跳空频繁。  

因此，把整套体系“拿来即用”并不现实；我们需要 **本土化的参数修正和止损层**，才能让它在沪深 300、深成指、ETF 等指数上真正看到稳定的 α。

---

## TD 指标两大“武器”

- **TD 序列（TD Sequential）**：启动—计数—触发，三步入场。对反转敏感。  
- **TD 组合（TD Combo）**：在序列基础上增加三条过滤条件，降低噪声，提高稳定性。  
两者原理一致，主战场在“启动阶段”锁定趋势，“计数阶段”等待衰竭信号。

---

## 修正 TD 指标的核心逻辑

### 步骤 1：启动阶段（趋势验证）

- **参数**：  
  - `T`：对比间隔天数（推荐 4）  
  - `N`：连续收盘优于 / 劣于 T 日前收盘的天数（A 股采样 6 天更稳妥）

- **买入启动**  
  连跌 `N` 天，每日收盘均低于 T 天前收盘 → 判断为潜在底部，开始计数。

- **卖出启动**  
  连涨 `N` 天，每日收盘均高于 T 天前收盘 → 判断为潜在顶部，开始计数。

### 步骤 2：计数阶段（衰竭量化）

#### TD 序列法  
对每日收盘价与前第 2 根 K 线比较：

| 买方（买入计数） | 卖方（卖出计数） |
|-----------------|-----------------|
| 计数 1：今日收盘 < 前两日收盘 | 计数 1：今日收盘 > 前两日收盘 |
| 计数 2：今日收盘 > 前两日收盘 | 计数 2：今日收盘 < 前两日收盘 |

- 触发条件：  
  `计数 1` 到 `M` 或 `计数 2` 到 `M/2` 立即下单。  
  A 股实证：`M=28` 兼顾胜率与频率。

#### TD 组合法  
计数当日起记录参考价 `P`，随后每个交易日需同时满足：

- **买入计数 1**  
  满足任一 a/b/c 条件：`close ≤ low(-2)`、`low < low(-1)`、`close < P`  
- **买入计数 2**  
  反向三条

当出现计数冲突时，**优先计入计数 1** 以确保顺趋势而非抢反弹。  
👉 [回撤更低还是收益更高？深度对比 TD 序列 vs TD 组合](https://okxdog.com/)  

---

## 止损设计：让策略自带“安全气囊”

无论 TD 序列还是 TD 组合，**在买入触发后不设置止损等同于裸奔**。  
修正后的止损机制：

1. 计数阶段记录区间 **最低成交价** 作为止损线。  
2. **隔日开盘**或收盘跌破止损线立即平仓。  
3. 若遇长期停牌，恢复交易当日开板即触发判断。

历史回测表明，仅凭简单止损，**下行风险可缩减 20%-40%**。

---

## 回测结果：数据不会说谎

### 1. TD 组合（指数：沪深 300）

- **回测区间**：2007-2016  
- **年化收益**：≈ 16%  
- **最大回撤**：24.8%  
- **亮点**：成功避开 2008、2015 两轮熊市

### 2. TD 组合（指数：深成指）

- **年化收益**：≈ 18%（波动加大）  
- **最大回撤**：31.9%  
- 结论：高 β 品种需额外降低仓位或缩短 M。

### 3. TD 序列（指数：沪深 300）

- **年化收益**：13.6%  
- **最大回撤**：16%（较低）  
- 更适合**保守型资金**。

### 4. TD 序列（实盘：华夏上证 50ETF）

- **最大回撤**：21.6%  
- **实盘滑点假设千 2 后仍跑赢 ETF 净值 9%+**  
👉 [一键拆解回测数据，看如何提升夏普比率](https://okxdog.com/)  

---

## 如何亲手搭一套可复制的 TD 策略？

1. **数据准备**：  
   - K 线分辨率：日线，至少 15 年历史；  
   - 复权方式：前复权；  

2. **参数网格**：  
   - T ∈ {3,4,5}；N ∈ {5,6,7}；M ∈ {26,28,30}；  
   - 固定止损线在计数阶段最低价。

3. **打分维度**：  
   - 年化收益 / 最大回撤 **比值>0.5**；  
   - 利弗莫尔胜率（盈利交易占比）>55%；  
   - 卡玛比率>1。

4. **信号池**：  
   - 连续 3 个周期信号一致才开仓；  
   - 多指数联合触发可降低假正例。

---

## 常见问题与解答（FAQ）

**Q1：A 股能否夜里挂单提前过滤开盘价跳空？**  
A：可以。将“计数 1/2 触发”条件改为**收盘后判断、次日集合竞价挂单**，多数回测显示收益几乎无差异，但减少了盘中滑点。

**Q2：M 值调太大会造成信号稀缺，如何解决？**  
A：可以引入**分笔级别二次确认**：当日线完成计数后，用 5 分钟或 15 分钟级别再跑一次 TD 序列，同向共振即开仓，策略频率可提升 40% 以上。

**Q3：策略更适合左侧还是右侧？**  
A：TD 本质属于**偏左侧**，建议在均线多头 ** 环境再启用，避免空头杀跌期的“钝化”陷阱。

**Q4：能否把该思路迁移到个股？**  
A：高频停牌、一字板等会使计数失真。可先筛选 **流动性>1 亿日成交**、**换手率>1%** 的白马股，再以行业指数先过滤顶部，得到更高胜率。

**Q5：实盘中有什么隐藏坑？**  
A：指数期货贴水、期货换月带来的基差波动可能造成“信号一致，盈亏不一”。若用指数期货替代 ETF，务必叠加 **基差收益修正模块**。

**Q6：止损线放在精确最低价会造成假突破，怎么办？**  
A：保守派可使用**前低 2% 保护垫**；大胆派可改用 **ATR 终止缓冲**。两种路径回测差异不大，关键在于 **执行一致**。

---

## 写在最后

TD 指标的美在于 **“简单硬核”**：用数字告诉你买卖应该发生在趋势的末段。  
把握住“修正”二字——**本土化参数、严格止损、多品种验证**——就能把这一套源自 80 年代的华尔街工具，锻造成今日 A 股的复利引擎。

祝各位量化交易者一路长虹，记得先回测，再小实盘，最后重仓，步步为营才是长久之道。